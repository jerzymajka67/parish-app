<body>

<main class="admin-events">

  <!-- ================= BREADCRUMBS ================= -->
  <nav class="breadcrumbs admin-breadcrumbs">
    <a class="menu-link" href="/admin/events">Events</a>

    <% breadcrumbs.forEach(crumb => { %>
      <span class="breadcrumb-sep">â€º</span>
      <a class="menu-link"
         href="/admin/events?path=<%= crumb.path %>">
        <%= crumb.name %>
      </a>
    <% }) %>
  </nav>

  <!-- ================= LAYOUT ================= -->
  <div class="admin-events-layout">

    <!-- ========== FOLDER BROWSER ========== -->
    <section class="events-browser">
      <h2 class="section-title">Folder contents</h2>

      <% 
        const parentPath =
          currentPath && currentPath.includes('/')
            ? currentPath.split('/').slice(0, -1).join('/')
            : '';
      %>

      <% if (currentPath) { %>
        <a class="folder-btn folder-up"
           href="/admin/events?path=<%= parentPath %>">
          â¬†ï¸ Up one level
        </a>
      <% } %>

      <% if (items.length === 0) { %>
        <p class="empty">This folder is empty</p>
      <% } else { %>
        <div class="folder-grid">

          <% items.forEach(item => { %>

            <% if (item.type === 'folder') { %>
              <a class="folder-btn"
                 href="/admin/events?path=<%= encodeURIComponent(
                   (currentPath ? currentPath + '/' : '') + item.name
                 ) %>">
                ğŸ“ <span><%= item.name %></span>
              </a>
            <% } else { %>
              <div class="file-btn">
                ğŸ–¼ <span><%= item.name %></span>
              </div>
            <% } %>

          <% }) %>

        </div>
      <% } %>
    </section>

    <!-- ========== TOOLS ========== -->
    <aside class="events-tools">
      <h2 class="section-title">Tools</h2>

      <!-- Upload image -->
      <form action="/admin/events/upload-image"
            method="POST"
            enctype="multipart/form-data"
            class="tool-form">

        <input type="hidden" name="currentPath" value="<%= currentPath %>">
        <input type="file" name="image" accept="image/*" required>

        <button class="menu-link btn-action" type="submit">
          Upload image
        </button>
      </form>

      <!-- Create folder -->
      <form action="/admin/events/create-folder"
            method="POST"
            class="tool-form">

        <input type="hidden" name="currentPath" value="<%= currentPath %>">
        <input type="text" name="folderName" placeholder="New folder name" required>

        <button class="menu-link btn-action" type="submit">
          Create folder
        </button>
      </form>
    </aside>

  </div>

</main>

</body>
